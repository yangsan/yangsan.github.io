Title: 一个搜索用的shell脚本
Date: 2014-2-13
Tags: hacks, bash
Slug: hacks_on_search

#源起

最近在学写shell脚本搞自动化，遵照“发现你时常重复的工作流程，将其自动化”的精神，我发现一个常有的情景是：工作、浏览网页时需要百度/google一个关键词，或者在豆瓣/新浪爱问上搜索一本书。

本身用加了浏览器的插件这些事情不算麻烦，不过多接触浏览器一秒钟就多一分被干扰（常在电脑前工作的同志应该懂的）的，能在命令行解决最好，也权当练习了。


#思路

解决思路也很简单，在命令行里输入

    :::bash
    webbrowser http://

就可以新打开一个浏览器标签，并打开相应的网页，一般的网页直接将网址填上去就好。

但这里考虑的是查询的问题，所以网址后面还要加上query的部分，这块不需要太多的知识，下面举例说明。

##栗子

以豆瓣读书为例，直接在浏览器中登陆其页面：[book.douban.com](book.douban.com)，在搜索框里随便填一个关键词，我填了“追风筝的人”，点搜索，注意跳转后的结果页面的地址变成了

    http://book.douban.com/subject_search?search_text=追风筝的人&cat=1001

问好后面的就是http请求中query的部分，而且也很好理解，`search_text=`后面的就是关键词了，这时我们将“追风筝的人”几个字换成“尘埃落定”，再按下回车，跳转到的页面正是搜索“尘埃落定”的结果。

所以下面要做的，就是在本地把整个http请求组织好，然后送到浏览器里去。

#脚本部分

暂时以函数的形式写在`.bashrc`文件里。


